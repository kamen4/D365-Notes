#D365_CS #D365 
- [[#Work with service-level agreements|Work with service-level agreements]]
	- [[#Work with service-level agreements#Introduction|Introduction]]
	- [[#Work with service-level agreements#Business closures and working hours|Business closures and working hours]]
	- [[#Work with service-level agreements#Create and define service-level agreements|Create and define service-level agreements]]
	- [[#Work with service-level agreements#Define SLA items|Define SLA items]]
	- [[#Work with service-level agreements#Define custom KPIs|Define custom KPIs]]
	- [[#Work with service-level agreements#Manage SLAs|Manage SLAs]]
- [[#Create and manage entitlements|Create and manage entitlements]]
	- [[#Create and manage entitlements#Overview|Overview]]
	- [[#Create and manage entitlements#Create entitlement records|Create entitlement records]]
	- [[#Create and manage entitlements#Work with entitlement channels|Work with entitlement channels]]
	- [[#Create and manage entitlements#Other considerations|Other considerations]]
	- [[#Create and manage entitlements#Define entitlement templates|Define entitlement templates]]

## Work with service-level agreements
[(More)](https://learn.microsoft.com/en-us/training/modules/service-level-agreements/)
### Introduction
Specific KPIs that an organization tracks can vary widely. However, several common KPIs might be available for companies to use to gauge success and improve customer service:
- **Customer Satisfaction Score (CSAT)** - This KPI is the most popular, and you can capture it by asking customers about their satisfaction with your business, product, or service.
- **Net Promoter Score (NPS)** - Measures the likelihood that your customers will refer you to someone else.
- **First Response Time** - Measures quickness of initial customer response when an issue is created.
- **Call Resolution Time** - Measures how quickly you're resolving customer issues.
- **Customer Retention Rate** - Ability to keep paying customers over a set period of time.
- **Employee Engagement** - Measures the level of employee commitment and connection to your organization.

Each detail line defines the following parameters:
- **SLA KPI** - Specifies the KPI that you're measuring.
- **Applicable When** - Defines the conditions that need to be met for the item to apply to the case.
- **Success Criteria** - Defines what successful resolution of the KPI looks like.
- **Success Actions** - Defines an action that should be done if the KPI is met.
- **SLA Item Failure** - Defines how long to wait until an item is considered to fail or not be met.
- **Failure Actions** - Defines action(s) that should be done if the KPI isn't met.
- **SLA Item Warning** - Defines how long to wait to provide a warning that a work item is in jeopardy of not being met.
- **Warning Actions** - Defines warning action(s) that should be done if the KPI is in jeopardy of not being met.

The following image demonstrates what a typical SLA might look like for different types of customers based on their promised level of service.
![[Pasted image 20240830133316.png]]

### Business closures and working hours
After you've created a holiday calendar, you can add holidays to it. A holiday typically includes the following information:
- **Name** - Name of the holiday
- **Start Date** - Date when the holiday begins
- **End Date** - Date when the holiday ends
- **Duration** - Total duration of the holiday

 In the Customer Service admin center, you can specify working hours by going to **Calendar** and selecting **Customer Service calendar**. When defining the work hours for a customer service calendar, you can define the following options:
- **Are the same for each day** - Select this checkbox to set work hours to be the same for each day. Selecting the working hours will allow you to define the work hours, including breaks.
    If you don't select **Are the same for each day**, you'll be able to select hours for each individual day.
- **Holiday Schedule** - Define if this service calendar observes holiday calendars. If you select to observe holidays, you can select which holiday schedule to use.
- **Time Zone** - Define the time zone for this service calendar.
> [!tip]
>  The common scenario is for an organization to have at least two calendars:
>  - **Standard** - Calendar with work hours defined as Monday through Friday from 8:00 AM to 5:00 PM. This calendar type observes the US holiday schedule.
>  - **24/7** - Calendar with work hours defined as all day, every day and that doesn't observe holiday schedules.

### Create and define service-level agreements
>You can create SLA KPIs from the Customer Service admin center by going to **Service terms** from the **Operations** group and selecting **Manage** in the **SLA KPIs** section.

When defining an SLA KPI, you'll need to specify the following details:
- **Name** - Specifies the name of the SLA KPI that will be used to identify it in the application.
- **Owner** - Defines the owner of the item. By default, it's set to the person who’s creating the item, but you can change it.
- **Entity Name** - Specifies the Microsoft Dataverse table that the KPI will be associated with, such as the Case table.
- **KPI Field** - Specifies the KPI field that will be used for this item. For example, if you're creating an SLA KPI to define the time within which a first response should be sent to the customer, select **FirstResponseByKPI** in the list. Out-of-the-box, the Case table includes two options that you can choose from: **FirstREsponseByKPI** and **ResolveByKPI**.
- **Applicable From** - Defines the field that will be used to measure warning and failure times.

>After you've created the necessary SLA KPIs and Customer Service calendars, you can start creating SLAs in the Customer Service admin center by selecting **Manage** in the **Service-level agreements (SLAs)** section of **Service terms**.

SLAs serve as the container for individual SLA items that will specify which SLA KPI is being used along with success criteria. Initially when you define an SLA, you'll need to provide the following details:
- **Name** - Specifies the name of the SLA.
- **Primary Entity** - Defines the Dataverse table that the SLA will apply to.

### Define SLA items
![[Pasted image 20240830134913.png]]
In the preceding example, each KPI that you want to track for each service level tier would be added to the SLA as its own SLA item. To track the response and resolve progress for **Gold** customers, you’d need to define two separate detail items. In this instance, the entire SLA would have six SLA items defined.

For each SLA item that you add to an SLA, you’ll need to supply the following information:
- **Name** - Specifies the name of the SLA item. _(This field is required.)_
- **KPI** - Specifies the SLA KPI that you're measuring. For example, you can select the **First Response By** or **Resolve By** SLA KPIs that you previously defined.
- **Allow Pause and Resume** - Specifies if the SLA timer can be paused and resumed. After the timer has resumed, the amount of time that it was paused for won't affect the SLA timer.
- **Business Hours** - Specifies if a Customer Service calendar is available for you to apply to the SLA item to affect how the items are calculated.
- **Applicable When** - Defines the conditions that need to exist on the record that the SLA is running against or a related record for the specific SLA item to be applied to the record (such as a case **Service Level** being set to **Gold**).
    - Be aware of using a field that could change frequently when you’re defining applicable **when** conditions, which can affect system performance.
    - Only active records are available for you to select as condition or action arguments.
- **Success Conditions** - Defines what a successful resolution of the defined KPI looks like (such as a specific field on the current or related record that’s being updated).

**Actions**
After you’ve saved the detail item, you can define actions by selecting the **Configure Actions** button, which will open in Microsoft Power Automate. SLA item actions are backed by Power Automate.
> [!important] 
> Initially, the Power Automate flow will include two steps, both of which will be labeled as **Do not delete or update**. Don't modify these steps in any way because it will break the functionality that associates the Power Automate flow with the correct SLA item.

The second step is a switch step that includes three actions. While you can't delete or update the switch step directly, you can edit the individual switch steps under the main switch. These steps represent the actions that you can complete.
Three types of actions that you can define:
- **Is Near Non Compliance** - Defines what action(s) should be implemented if the success criteria are in jeopardy of not being met within the specified warning time.
- **Is Succeeded** - Defines what action(s) should be performed if the success criteria are met.
- **Is Non-compliant** - Defines what action(s) should be completed if the success criteria aren’t met within the specified failure time.

### Define custom KPIs
While the case table is typically set up for use with SLAs by default, Dynamics 365 lets you use SLA functionality with any table that you choose.

You might enable SLAs for other entities in Dynamics 365 for many different reasons, such as:
- **Leads** - Track how quickly account executives are getting back to new leads.
- **Work orders** - Track how quickly work orders are being scheduled and dispatched.
- **Opportunities** - Track how quickly specific types of opportunities are being closed.

Some custom KPIs that you might set up include:
- **Lead-Initial Contact KPI** - KPI to measure when an account executive makes their first initial contact with a lead.
- **Work Orders-Dispatch By KPI** - KPI to measure when a work order has been marked as scheduled.
- **Opportunity-Closed By KPI** - KPI to measure when an opportunity has been closed.
You can define custom KPIs by creating a lookup column (1:N relationship) with the SLA KPI Instance table.

### Manage SLAs
The following table explains how SLAs are applied when a new case is created.

|Action|Applicable SLA|
|---|---|
|**Case created with no entitlement associated**|The organization's default SLA will be applied to the case. When no default SLA exists, no SLA will be applied to the case.|
|**Entitlement is associated to the case**|When the entitlement has an active associated SLA, the associated SLA will be applied to the case. When the entitlement doesn't have an active associated SLA, the default SLA will be applied to the case. When the entitlement doesn't have an active associated SLA, and no default SLA exists, then no SLA will be applied to the case.|

>Consider a scenario where you're working on a case with a customer and need specific information from them. While you're waiting for the customer to get back to you, you might want to pause the calculation time on the SLA to ensure that the time when you're waiting for the customer won't affect the SLA calculation time.
>When you create SLA items, you can specify if you want to allow pausing and resuming of the timer.

You can add a timer control to any entity through the form customization screen to provide countdown information for any defined KPI on that entity. When a timer control is added, you can set up the following parameters:
- **Failure Time Field** - Defines the date/time-based field that will be used for calculating success or failure, such as the **Created On** field. (Required)
- **Success Condition** - Defines the field and field value that determine successful resolution, such as the **First Response Sent** field being set to **Yes**. (Required)
- **Failure Condition** - Defines the field and field value that determine a failure for the time, such as the **First Response Sent** field being set to **No**.
- **Warning Condition** - Defines the field and field value that determine when a warning should be triggered.
- **Cancel Condition** - Defines the field and field value that determine when the timer should be canceled, such as the **Status Reason** being set to **Resolved**.
- **Pause Condition** - Defines the field and field value that determine when the timer should be paused, such as the **Status Reason** being set to **Waiting for Details**.

## Create and manage entitlements
[(More)](https://learn.microsoft.com/en-us/training/modules/creating-and-managing-entitlements-in-dynamics-365/)
### Overview 
Microsoft Dynamics 365 can help organizations manage, track, and enforce these allotments by providing two mechanisms for managing the level of service that a customer is entitled to:
- **Service level agreements (SLAs):** SLAs track and define what should happen when a case is opened, like the initial response time by a support engineer or the time that it takes to resolve the case.
- **Entitlements:** Entitlements are agreements that define the level and type of support that a customer is entitled to.

>Entitlements define specific support details that were promised to a customer. These details include the coverage dates (period), and either the number of cases or the length of time that's allotted.

The Dynamics 365 entitlement management system is based on these elements:
- **Entitlements:** An entitlement is the actual agreement that defines the specific support details that are provided to the customer. A typical entitlement defines the specific coverage period, the allotment types/terms, the supported channels, and the products that are covered.
- **Entitlement channels:** You can define one or more channels that specify the coverage that's provided for a specific product or item.
- **Entitlement templates:** You can use entitlement templates to quickly create and define entitlement options, based on the different types of entitlements that are offered to customers.

![[Pasted image 20240830144755.png|424]]
- **Draft:** When an entitlement is first created, it's in **Draft** status. While an entitlement is a draft, you can edit all the details of the record, including the number of cases, the channels and products, and the coverage dates. You can't attach cases to an entitlement that's in **Draft** status.
- **Waiting:** Entitlements that are in **Waiting** status have been activated and are waiting for the entitlement start date to be reached. Because the entitlement has been activated, you can't edit any details of the record. Because the start date hasn't been reached, you can't attach cases to the entitlement.
- **Active:** An entitlement is considered active when it has been activated and the current date is within the specified coverage dates. While an entitlement is active, new cases can be attached to it, but the details of the entitlement record can't be edited. To edit the details, you must first inactivate the entitlement.
- **Expired:** An entitlement expires after the end date is reached. After an entitlement expires, you can't attach any cases to it.
- **Canceled:** An entitlement can be canceled at any point while it's active.
- **Renewals:** Only expired or canceled entitlements can be renewed.

### Create entitlement records
>Entitlements are created in the **Customer Service admin center** application. Navigate to **Service Terms** under the **Operations** group and select **Manage** next to **Entitlements**.

When you create an entitlement, you must provide the following information:
- **Name:** Enter the name of the entitlement record. This name will appear in lookup fields when you search for an entitlement.
- **Primary Customer:** Define the customer that the entitlement is associated with.
- **Start Date:** Date cases can be attached to the entitlement after it's set to active.
- **End Date:** The date when the entitlement will expire.
- **Restrict based on entitlement terms:** Specify whether entitlement terms can be exceeded. If you set this option to **Yes**, entitlement terms are enforced.
- **Allocation Type:** Define the type of entitlement. Two options are available: **Number of cases** and **Number of hours**.
- **Decrease Remaining On:** Specify when the case should be deducted from the remaining terms. Two options are available: **Case Resolution** and **Case Creations**.
- **Total Terms:** Define the total number of cases or hours that's allotted, depending on the allocation type. Note that, though this field isn't required, it's a best practice to enter a value.

Here are some other points to consider about how the **Case Creation** and **Case Resolution** options affect the remaining terms:
- **Case Creation:**
    - If you create a new case that's associated with an entitlement, the remaining terms are decreased.
    - If you associate an existing case with an entitlement, the remaining terms are decreased.
    - If you cancel a case that's associated with an entitlement, the remaining terms are increased.
    - If a case is updated so that it's associated with a different entitlement, the remaining terms on the first entitlement are increased.
- **Case Resolution:**
    - If you resolve a case that's associated with an entitlement, the remaining terms are decreased.
    - If you reactivate a case that's associated with an entitlement, the remaining terms are increased.
- **Changing from Case Resolution to Case Creation:** When a new entitlement is first created, the **Decrease Remaining On** field is set to **Case Resolution**. Occasionally, people activate an entitlement but realize later that the **Decrease Remaining On** field should have been set to **Case Creation**. If you just inactivate an entitlement and change the value to **Case Creation**, open cases that are currently attached won't decrease the remaining terms. Instead, you must remove the entitlement from the case and then add it back.

### Work with entitlement channels
>Out of the box, the channels that are available for entitlements are the same channels that are listed in the **Origin** field when a new case is created: Phone, Email, Web, Facebook, and Twitter.

Channels are stored in a choice column called **Case Origin**. More channels can be added to this field as needed. You can access the field from [Power Apps](https://make.powerapps.com/). The **Case Origin** field is available by going to **Dataverse > Choices > Case Origin**.

### Other considerations
Because products can be added to an entitlement, entitlements are often used for things like warranty contracts.

After a product or contact is added to a case, only valid entitlements for that product or contact are available for selection.

If no product or contact is added to the case:
- All valid entitlements for the customer are available for selection.
- An error is generated if an invalid product or contact is selected later.

>If a service level agreement (SLA) is specified for an entitlement, any new cases that are opened against the entitlement will use that SLA. If a new case is associated with an entitlement that doesn't have an SLA, the default SLA for the organization will be used. If there's no default SLA, no SLA will be used. The following table explains the scenarios in more detail.

### Define entitlement templates
>Entitlement templates can be created in the **Customer Service admin center** application by going to **Service Terms** and selecting **Manage** next to **Entitlement Templates**. The only information that's required for a template is the name. You can fill in the rest of the information as you require.

>After the template is saved, you can use it to create new entitlements. Select **New** on the command bar, then select **From template**, and then select a template in the list that's provided. All necessary information will be prefilled in the new entitlement record, based on the template that you selected.



